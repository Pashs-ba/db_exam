В каждом алгосе должен быть пролог - заявление о входе в критическую секцию, сама секция и эпилог - заявление о выходе.
Главная сложность - процессы не могут общаться между собой и вынужденны постоянно пологаться на структуры в ос, которые не всегда отражают актульный статус ресурса (ты зашел в туалет, снял штаны, и еще не закрыл защелку)

# Замок
```C++
shared int lock = 0;
F(){
	while(lock){} // wait
	lock = 1;
	// critical session
	lock = 0;
}
```
Главная проблема - в строчке после while - тут может случится прерывание и нарушения