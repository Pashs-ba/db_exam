# Семафоры Дейкстра. Решение проблемы «производитель-потребитель» с помощью семафоров.
Semophore S - целая неотрицательная переменная, над которой определено 2 действия:
```cpp 
P(S) {
	while (S == 0) {ожидание}; S -= 1;
}

V(S) {
	S += 1
}
```

Просто увеличив количество семафоров до 3, можно решить задачу producer-consumer:
```cpp
Producer() {
	while (true) {
		produce_data();
		P(empty); // Ожидаем, пока в буфере появится свободное место
		P(mutex); // Захватываем мьютекс для обеспечения взаимного исключения при доступе к буферу
		push_data(); // Кладем произведенные данные в буфер
		V(mutex); // Освобождаем мьютекс, позволяя другим потокам доступ к буферу
		V(full); // Увеличиваем семафор full, указывая, что в буфере появился новый элемент
	}
}

Consumer() {
	while (true) {
		P(full); // Ожидаем, пока в буфере появятся данные
		P(mutex); // Захватываем мьютекс для обеспечения взаимного исключения при доступе к буферу
		get_data(); // Извлекаем данные из буфера
		V(mutex); // Освобождаем мьютекс, позволяя другим потокам доступ к буферу
		V(empty); // Увеличиваем семафор empty, указывая, что в буфере освободилось место
		consume_data();
	}
}
```